(self.modernJsonp=self.modernJsonp||[]).push([["32031"],{105321(e,o,t){t.d(o,{A:()=>s});function s(e,o,t){let s,i,a,n=!!t?.leading,l=t?.trailing!==!1,r=t?.maxWait?Math.max(t.maxWait,o):void 0,c=null,d=0;function _(o){let t=s;return s=void 0,d=o,t&&(i=e(...t)),i}function h(e){let t=e-(a??0),s=e-d;return void 0===a||t>=o||t<0||void 0!==r&&s>=r}function g(){let e=Date.now();if(h(e))(c=null,l&&s)?_(e):s=void 0;else{let t,s,i;c=setTimeout(g,(t=e-(a??0),s=e-d,i=o-t,void 0!==r?Math.min(i,r-s):i))}}function u(){null!==c&&clearTimeout(c),c=setTimeout(g,o)}function m(...e){let t=Date.now(),l=h(t);if(s=e,a=t,l){if(null===c)return d=t,c=setTimeout(g,o),n?_(t):i;else if(void 0!==r)return u(),_(t)}return null===c&&u(),i}return m.flush=function(){if(null!==c&&s){let e=Date.now();return clearTimeout(c),c=null,_(e)}return i},m.cancel=function(){null!==c&&clearTimeout(c),d=0,s=void 0,a=void 0,c=null},m}},63089(e,o,t){t.d(o,{Ay:()=>a,S7:()=>i,ss:()=>s});let s=`
input[type="password"]::-ms-reveal  {
    display: none;
}
`,i={margin:"0 auto 22px",width:"270px"},a=`
.Tooltip_message:before, .Tooltip_message:after {
  border-style: solid;
  content: '';
  display: block;
  margin-top: -8px;
  position: absolute;
  right: 100%;
  top: 17px;
  width: 0;
}
.Tooltip_message:before {
  border-color: transparent rgba(0,0,0,0.48);
  border-width: 8px 10px 8px 0;
}
.Tooltip_message:after {
  border-color: transparent #fff;
  border-width: 8px 10px 8px 0;
  margin-right: -1px;
}
.Tooltip_mobileMessage:before, .Tooltip_message:after {
  border-style: solid;
  display: block;
  margin-top: -8px;
  position: absolute;
  right: 100%;
  top: 17px;
  width: 0;
}
.Tooltip_mobileMessage:before {
  border-color: transparent rgba(0,0,0,0.48);
  border-width: 8px 10px 8px 0;
}
.Tooltip_mobileMessage:after {
  border-color: transparent #fff;
  border-width: 8px 10px 8px 0;
  margin-right: -1px;
}
.Tooltip_wrapper {
  position: absolute;
  left: calc(100% + 12px);
  z-index: 1;
}
.Tooltip_mobileWrapper {
  margin-top: 7px;
  z-index: 1;
}

.TermsOfService__light a {
  color: rgba(255,255,255,0.9);
}
`},438742(e,o,t){t.d(o,{A:()=>a});var s=t(143334),i=t(218781);function a(e,o,t=""){if(!(o&&o.search))return"";let{message:n}=(0,i.A)(o.search),l=(0,i.A)(o.search).username||t,r="true"===(0,i.A)(o.search).multiple_accounts;return(0,s.A)({i18n:e,message:n,multipleAccounts:r,username:l})}},143334(e,o,t){t.d(o,{A:()=>r});var s=t(836737),i=t(410899),a=t(633338),n=t(135656);function l(e,o,t){return(0,n.jsx)(s.KJ,{align:t||"center",children:(0,i.vQ)(e,{username:(0,n.jsx)(s.KJ,{inline:!0,weight:"bold",children:o})})})}function r({i18n:e,message:o,multipleAccounts:t,username:s=""}){switch(o){case a.Pg:return e._('Your account has been deleted. We\'re sad to see you go', 'unauthLoginPage.accountDeletedToast.message', 'Confirmation message after a user has successfully deleted their account');case a.bE:if(t)return l(e._('An email has been sent with final steps to delete your account, {{username}} and its linked accounts', 'accountDeletedEmailToast.message.multipleAccounts', 'Confirmation message after a user has successfully requested multiple accounts deletion'),s);return l(e._('An email has been sent with final steps to delete your account, {{username}}', 'accountDeletedEmailToast.message.singleAccount', 'Confirmation message after a user has successfully requested a single account deletion'),s);case a.X5:return l(t?e._('The account, {{username}}, and its associated linked accounts have been deactivated', 'unauthLoginPage.deactivatedToast.message.multipleAccounts', 'Confirmation message after a user has successfully deactivated multiple accounts'):e._('The account, {{username}}, has been deactivated', 'unauthLoginPage.deactivatedToast.message.singleAccount', 'Confirmation message after a user has successfully deactivated a single account'),s);case a.B5:return l(e._('Success! You\'ve unlinked this business account. You are currently in {{username}}.', 'authHomeFeedPage.unlinkAccountToast.message', 'Confirmation message after a user has successfully unlinked business account'),s,"start");case a.NE:return l(e._('You\'ve switched into and are currently in the account {{username}}', 'accountSettings.switchAccountToAccountChanges', 'Confirmation message after a user has successfully switched accounts and got redirected to Account Changes'),s,"start");case a.UN:return e._('Your account is now a personal account', 'unauthLoginPage.unlinkAccountToast.personal.message', 'Confirmation message after a user has successfully converted the lba to a personal account');case a.cu:return e._('Your account is now a business account', 'unauthLoginPage.unlinkAccountToast.business.message', 'Confirmation message after a user has successfully converted the lba to a business account');case a.lL:return e._('Your Linked Business Account was deleted', 'unauthLoginPage.unlinkAccountToast.business.message', 'Confirmation message after a user has successfully deleted their linked business account');default:return""}}},742450(e,o,t){t.d(o,{PF:()=>c,ir:()=>l,r_:()=>r});var s=t(301704),i=t(386565),a=t(100767),n=t(798923);let l="274266067164",r=(e,o)=>(o&&(0,n.OW)({event:"load_script_start",provider:"facebook"}),(0,i.A)((0,a.A)(e),"FACEBOOK").then(()=>{o&&(0,n.OW)({event:"load_script_success",provider:"facebook"}),"u">typeof window&&window.FB?(o&&(0,n.OW)({event:"initialize_library",provider:"facebook"}),window.FB.init({appId:l,status:!0,xfbml:!0,version:"v2.7"})):o?(0,n.OW)({event:"global_object_not_found",provider:"facebook"}):(0,n.PM)("pcons.non_autologin.fb.global_object_not_found")})),c=async(e,o)=>{await r(e,!1);let t=await new Promise(e=>{"u">typeof window&&window.FB&&window.FB.getLoginStatus(e)}),i=o?"dweb":"mweb";if("connected"===t.status){(0,n.PM)(`${i}.login_data_from_fb_token.connected`);let{userID:e,accessToken:o}=t.authResponse;try{let t=await (0,s.A)({url:"/v3/facebook/login_data/",data:{facebook_id:e,facebook_token:o}});if(t?.resource_response?.data){let{connected_to_gplus:e,connected_to_google:o,has_password:s}=t.resource_response.data,a=e||o;return(0,n.PM)(`${i}.login_data_from_fb_token.success`),{isGoogleConnected:a,hasPassword:s,isFBAuthOnly:!a&&!s}}(0,n.PM)(`${i}.login_data_from_fb_token.no_data`)}catch{(0,n.PM)(`${i}.login_data_from_fb_token.error`)}}return null}},100767(e,o,t){t.d(o,{A:()=>s});let s=e=>`//connect.facebook.net/${(e=>{let o=e.replace(/-/g,"_");if(o.startsWith("es"))return"es_LA";if(o.startsWith("ar"))return"ar_AR";switch(o){case"de":return"de_DE";case"fr":return"fr_FR";case"it":return"it_IT";case"ja":return"ja_JP";case"nl":return"nl_NL";case"tr":return"tr_TR";case"en_AU":return"en_US";default:return o}})(e)}/sdk.js`},152225(e,o,t){t.r(o),t.d(o,{default:()=>u});var s=t(335831),i=t(657140),a=t(836737),n=t(129625),l=t(396901),r=t(410899),c=t(798923),d=t(119795),_=t(673017),h=t(135656);let g={textAlign:"start"};function u(){(0,i.useEffect)(()=>{(0,s.A)("QRCodeLoginAppErrorBanner","/app/www/login/duplo/QRCodeLoginAppErrorBanner.tsx")},[]);let e=(0,l.A)(),{logContextEvent:o}=(0,n.o)(),t=(0,r.$w)({text:e._('<strong id=\'1\'>Get the app</strong> to log in with QR code', 'mweb.qr_code_login_app_error.banner.text', 'Text for QR code login app error banner'),jsxReplacements:{1:({innerHtmlStrings:e})=>(0,h.jsx)(a.KJ,{inline:!0,underline:!0,children:e})}});return(0,d.A)(()=>{(0,c.PM)("mweb.qr_code_login_app_error.banner.view"),o({event_type:13,component:15429})}),(0,h.jsx)(a.az,{children:(0,h.jsx)(_.A,{app_upsell_type:"qr-code-login-app-error-banner",componentType:15430,children:({handleOpenApp:s})=>(0,h.jsx)(a.Rp,{onTap:()=>{(0,c.PM)("mweb.qr_code_login_app_error.banner.tap"),o({event_type:102,component:15429}),s()},children:(0,h.jsxs)(a.az,{alignItems:"center",color:"infoWeak",direction:"row",display:"flex",paddingX:4,paddingY:4,rounding:400,children:[(0,h.jsx)(a.az,{marginEnd:4,children:(0,h.jsx)(a.In,{accessibilityLabel:e._('Pinterest', 'proPartnerHeader.partnerBadge.pinterestIcon', 'Pinterest icon'),color:"info",icon:"pinterest",size:20})}),(0,h.jsx)(a.az,{dangerouslySetInlineStyle:{__style:g},children:(0,h.jsx)(a.KJ,{inline:!0,children:t})})]})})})})}},161090(e,o,t){t.d(o,{A:()=>ew});var s=t(335831),i=t(657140),a=t(924660),n=t(278461),l=t(836737),r=t(372864),c=t(221718),d=t(233944),_=t(105321),h=t(129625),g=t(742450),u=t(376195),m=t(491149),p=t(396901),f=t(449153),b=t(798923),w=t(119795),A=t(135656);let x={textAlign:"start"};function P(){(0,i.useEffect)(()=>{(0,s.A)("FacebookRecoverAccountBanner","/app/packages/desktopLoginModal/FacebookRecoverAccountBanner.tsx")},[]);let e=(0,p.A)(),o=(0,m.qJ)(),{isRetrievingLoginData:t,isGoogleConnected:a,hasPassword:n,isFBAuthOnly:r}=function({disableFetch:e=!1}){let{locale:o}=(0,u._8)(),t=(0,m.qJ)(),[s,a]=(0,i.useState)(!1),[n,l]=(0,i.useState)(!1),[r,c]=(0,i.useState)(!1),[d,_]=(0,i.useState)(!1),[h,p]=(0,i.useState)(!0);return(0,i.useEffect)(()=>{let s=async()=>{let e=await (0,g.PF)(o,t);e?(a(e.isGoogleConnected),l(e.hasPassword),c(e.isFBAuthOnly)):_(!0),p(!1)};e?p(!1):s()},[o,t,e]),d||e?{isRetrievingLoginData:h}:{isGoogleConnected:s,hasPassword:n,isFBAuthOnly:r,isRetrievingLoginData:h}}({}),{logContextEvent:c}=(0,h.o)(),[d,_]=(0,i.useState)("default"),P=o?"dweb":"mweb";return(0,w.A)(()=>{c({event_type:15393,element:10881}),(0,b.PM)("pcons.login_page.fb_recover_account_banner.view")}),(0,i.useEffect)(()=>{if(t)return;let e="default";a?e="google":n?e="email":r&&(e="fbOnly"),_(e),(0,b.PM)(`${P}.fb_recover_account_banner.view.${e}`)},[t,P,a,n,r]),(0,A.jsx)(l.az,{marginTop:o?4:void 0,padding:o?4:void 0,children:(0,A.jsx)(l.$A,{href:`${f.UU5}?lookup=true`,onTap:({dangerouslyDisableOnNavigation:e})=>{(0,b.PM)(`${P}.fb_recover_account_banner.click.${d}`),o&&e(),c({event_type:15392,element:10881})},children:(0,A.jsxs)(l.az,{alignItems:"center",color:"infoWeak",direction:"row",display:"flex",paddingX:4,paddingY:4,rounding:400,children:[(0,A.jsx)(l.az,{marginEnd:4,children:(0,A.jsx)(l.In,{accessibilityLabel:e._('info icon on the facebook recover account banner', 'facebook_recover_account_banner.icon', 'Icon for facebook recover account banner'),color:"info",icon:"circle-information",size:20})}),(({authOption:e,i18n:o,isRetrievingLoginData:t})=>{let s=o._('Facebook login is no longer available. Log in with an option below or ', 'facebook_recover_account_banner.text_1', 'Text for facebook recover account banner 1'),i=o._('tap to recover your account', 'facebook_recover_account_banner.text_2', 'Text for facebook recover account banner 2');return t?(0,A.jsx)(l.az,{alignItems:"center",direction:"column",display:"flex",marginEnd:10,width:"100%",children:(0,A.jsx)(l.y$,{color:"default",show:!0,size:"sm"})}):(t||("google"===e?s=o._('Facebook login is no longer available. Log in with Google or ', 'facebook_recover_account_banner_google.text', 'Text for facebook recover account banner suggesting Google connection'):"email"===e?s=o._('Facebook login is no longer available. Log in with email or ', 'facebook_recover_account_banner_email.text', 'Text for facebook recover account banner suggesting Email login'):"fbOnly"===e&&(s=o._('Facebook login is no longer available. ', 'facebook_recover_account_banner_facebook.text_1', 'Text for facebook recover account banner Facebook only login 1'),i=o._('Tap to get back into your account', 'facebook_recover_account_banner_facebook.text_2', 'Text for facebook recover account banner Facebook only login 2'))),(0,A.jsxs)(l.az,{dangerouslySetInlineStyle:{__style:x},children:[(0,A.jsx)(l.KJ,{inline:!0,children:s}),(0,A.jsx)(l.KJ,{inline:!0,weight:"bold",children:i})]}))})({authOption:d,i18n:e,isRetrievingLoginData:t})]})})})}function z(){(0,i.useEffect)(()=>{(0,s.A)("FacebookDeprecationTextLink","/app/packages/duplo/FacebookDeprecationTextLink.tsx")},[]);let e=(0,p.A)(),{logContextEvent:o}=(0,h.o)();return(0,w.A)(()=>{(0,b.PM)("mweb.fb_deprecation_text_link.view"),o({event_type:15393,element:18307})}),(0,A.jsx)(l.az,{marginTop:3,children:(0,A.jsxs)(l.KJ,{align:"center",size:"200",children:[e._('Facebook login is no longer available ', 'facebook_deprecation_text_link.text_1', 'First part of Facebook deprecation message below login button'),(0,A.jsx)(l.$A,{href:`${f.UU5}?lookup=true`,onTap:()=>{(0,b.PM)("mweb.fb_deprecation_text_link.click"),o({event_type:15392,element:18307})},children:(0,A.jsx)(l.KJ,{inline:!0,size:"200",underline:!0,weight:"bold",children:e._('Update login method', 'facebook_deprecation_text_link.text_2', 'Link text for updating login method after Facebook deprecation')})})]})})}var k=t(301704),v=t(923957),y=t(388364),j=t(410899),S=t(633338),L=t(438742),E=t(804172),T=t(409111),C=t(687835),F=t(224297),I=t(528989),M=t(529543),B=t(424120),O=t(404310),U=t(906494),R=t(218781),W=t(507120),K=t(874748),D=t(657737),J=t(282395),V=t(370377),N=t(63089),H=t(162246),G=t(538346),q=t(488265),Y=t(795744);function $(e,o,t){var s;return(o="symbol"==typeof(s=function(e,o){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var s=t.call(e,o||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===o?String:Number)(e)}(o,"string"))?s:s+"")in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,e}class X extends i.PureComponent{constructor(...e){super(...e),$(this,"state",{emailFieldElement:null,shouldShowEmailSuggestion:!1}),$(this,"handleChangeEmail",({value:e})=>{let{handleChangeEmail:o}=this.props;if(this.state.shouldShowEmailSuggestion)this.setState({shouldShowEmailSuggestion:!1});else if(e.endsWith("@")){let e=this.emailInputRef;this.setState({shouldShowEmailSuggestion:!0,emailFieldElement:e})}o&&o({value:e})}),$(this,"handlePasswordFocus",()=>{(0,b.uq)("focus_password")}),$(this,"handleEmailSuggestionClick",e=>{let{trackInteraction:o}=this.props;o&&o({action:"click",item:"email-suggestions",within:"login-page"}),this.setState({shouldShowEmailSuggestion:!1}),this.handleChangeEmail({value:e})}),$(this,"passwordReset",e=>{(0,b.uq)("click_forget_password"),this.props.handlePasswordReset&&this.props.handlePasswordReset(e)}),$(this,"handleLoginClick",()=>{(0,b.XB)({event:"start",provider:"email"}),(0,b.uq)("press_login_continue"),this.props.onLoginClick&&this.props.onLoginClick()}),$(this,"handleSignupClick",()=>{let{onSignUpClick:e}=this.props;e&&e()})}componentDidMount(){this.handleChangeEmail({value:this.props.email})}render(){let{email:e,handleChangePassword:o,hideEmailField:t,hideLoginBtn:s,hidePasswordField:a,i18n:n,passwordValidationError:r,emailValidationError:c,emailLoginOnlyForRecoverAccount:d,validateEmailOnBlur:_,validatePasswordOnBlur:h,isSIWAError:g,isValid:u,isSsoFlow:m,onSubmit:p,password:f,requestContext:b,shouldShowSignUpButton:w,showEmailAsText:x,onForgetPasswordForFacebookRecover:P}=this.props,{emailFieldElement:z,shouldShowEmailSuggestion:k}=this.state,v=g&&r,y=n._('Log in', 'Label for log in button', 'Label for log in button'),j=!a;return m&&(y=n._('Continue with SSO', 'login.sso.continue_button.text', 'Label for continue with SSO button'),j=!1),(0,A.jsx)(l.az,{marginBottom:3,marginTop:3,children:(0,A.jsxs)("form",{autoCapitalize:"none",autoCorrect:"off",onSubmit:p,children:[!t&&x&&(0,A.jsx)(l.az,{marginBottom:5,children:(0,A.jsx)(l.KJ,{align:"center",children:e})}),!t&&!x&&(0,A.jsxs)(i.Fragment,{children:[k?(0,A.jsx)(Y.A,{email:e,emailFieldElement:z,handleEmailSuggestionClick:this.handleEmailSuggestionClick,showUsername:!0}):null,(0,A.jsx)(l.az,{marginTop:1,children:(0,A.jsx)(l.A_,{ref:e=>{this.emailInputRef=e},errorMessage:c,id:"email",onBlur:_,onChange:this.handleChangeEmail,placeholder:n._('Email', 'Prompt for user to enter in email on the mobile web login page', 'Prompt for user to enter in email on the mobile web login page'),size:"lg",type:"email",value:e})})]}),j?(0,A.jsxs)(l.az,{children:[(0,A.jsxs)(l.az,{marginTop:2,position:"relative",children:[b.userAgent.browserName?.includes("Edge")&&(0,A.jsx)(G.A,{unsafeCSS:N.ss}),(0,A.jsx)(l.A_,{autoComplete:"on",errorMessage:r,id:"password",onBlur:h,onChange:o,onFocus:this.handlePasswordFocus,placeholder:n._('Password', 'Prompt for user to enter in password on the mobile web login page', 'Prompt for user to enter in password on the mobile web login page'),size:"lg",type:"password",value:f})]}),d?(0,A.jsx)(l.az,{"data-test-id":"reset-password",marginTop:2,children:(0,A.jsx)(l.Rp,{onTap:()=>{P?.(this.props.email)},children:(0,A.jsx)(l.KJ,{inline:!0,size:"100",weight:"bold",children:n._('Forgot your password', 'pass_word_reset_page.fb_multi_auth_login.send_forgot_password_email', 'Link for fb multi-auth user to reset their email if they are eligible for email password sign-in')})})}):(0,A.jsx)(l.az,{"data-test-id":"reset-password",marginTop:2,children:(0,A.jsx)(l.KJ,{inline:!0,size:"100",weight:"bold",children:(0,A.jsx)(l.N_,{display:"inlineBlock",href:"/password/reset",onClick:({event:e})=>this.passwordReset(e),tapStyle:"none",underline:"hover",children:v?n._('Reset your password', 'Heading displayed when email is entered on the password reset page', 'Heading displayed when email is entered on the password reset page'):n._('Forgot your password?', 'Link to the password reset page', 'Link to the password reset page')})})})]}):null,w&&(0,A.jsx)(l.az,{marginTop:3,children:(0,A.jsx)(l.$n,{color:"primary",fullWidth:!0,onClick:this.handleSignupClick,text:n._('Sign up with this email', 'Label for sign up button', 'Label for sign up button'),type:"submit"})}),!s&&(0,A.jsx)(l.az,{"data-test-id":"log-in-button",marginTop:4,children:(0,A.jsx)(H.A,{color:"primary",disabled:!u||w,fullWidth:!0,onClick:this.handleLoginClick,size:"md",text:y,type:"submit"},!u||w?"disabled":"enabled")})]})})}}let Q=function(e){let o=(0,p.A)(),t=(0,m.M)(),s=(0,q.A)(),i=(0,d.A)(),a=(0,u._8)();return(0,A.jsx)(X,{...e,i18n:o,isPhoneDevice:t,logContextEvent:i,requestContext:a,trackInteraction:s})};var Z=t(389598),ee=t(694337);function eo({onDismiss:e}){(0,i.useEffect)(()=>{(0,s.A)("LoginAssistanceGoogleModal","/app/www/login/duplo/LoginAssistanceGoogleModal.tsx")},[]);let o=(0,p.A)();(0,i.useEffect)(()=>{(0,b.PM)("unauth.mweb.login_assistance_google_modal.view")},[]);let t=o._('Having trouble logging in?', 'mweb.accountRecovery.loginAssistance.googleModal.heading', 'Modal heading for users who failed to login through password and are connected through Google');return(0,A.jsxs)(Z.Ay,{accessibilityModalLabel:t,heading:(0,A.jsxs)(l.az,{children:[(0,A.jsx)(l.az,{left:!0,marginStart:6,marginTop:-10,position:"absolute",children:(0,A.jsx)(l.K0,{accessibilityLabel:o._('Dismiss modal button', 'dismiss button accessibilityLabel', 'accessibilityLabel.dismiss.link_modal'),bgColor:"transparent",icon:"close",onClick:()=>{e()},size:"sm"})}),(0,A.jsx)(l.az,{display:"flex",justifyContent:"center",marginBottom:4,marginTop:10,children:(0,A.jsx)(l.In,{accessibilityLabel:o._('Pinterest logo', 'Accessibility label for Pinterest icon', 'Accessibility label for Pinterest icon'),color:"primary",icon:"pinterest",size:32})}),(0,A.jsx)(l._Y,{accessibilityLevel:1,align:"center",size:"400",children:t})]}),isOpen:!0,onDismiss:e,children:[(0,A.jsx)(l.az,{marginBottom:4,marginTop:4,paddingX:12,children:(0,A.jsx)(l.KJ,{align:"center",children:o._('Looks like your account is connected to Google. Log in with Google to get back into your account.', 'mweb.accountRecovery.loginAssistance.googleModal.text', 'Modal text for users who failed to login through password and are connected through Google')})}),(0,A.jsx)(l.az,{marginBottom:8,paddingX:14,children:(0,A.jsx)(ee.A,{container:"LoginAssistanceGoogleModal",google:!0})})]})}var et=t(101383),es=t(152225),ei=t(552183),ea=t(14143),en=t(472441),el=t(526488),er=t(644094);function ec({email:e,emailValidationError:o,handleChangeEmail:t,handleShowMagicLinkForm:a,isValid:r,loginOptions:c,validateEmailOnBlur:d,renderLoginButtons:_,showToast:h,signupOptions:g}){(0,i.useEffect)(()=>{(0,s.A)("LoginFormMagicLink","/app/www/pages/duplo/LoginFormMagicLink.tsx")},[]);let u=(0,p.A)(),m=(0,n.Zp)(),f=(0,n.zy)(),[w,x]=(0,i.useState)("EMAIL_INPUT"),{checkEmailBounce:P}=(0,en.A)(e,"magic_link_email_send"),[z,v]=(0,i.useState)(""),[S,L]=(0,i.useState)(!1),T=u._('Sorry, this doesn\'t look like a valid email', 'mweb.mobile_login_form.magic_link_email_input.invalid_email_error', 'Error message while inputting email for magic link login'),C=async()=>{try{(0,b.PM)("mweb.mobile_login_form.magic_link_email_send.request"),await (0,k.A)({url:"/v3/users/magic_link/",method:"POST",data:{email:e}}),x("CHECK_EMAIL"),(0,b.PM)("mweb.mobile_login_form.magic_link_email_send.success")}catch(t){let o=(0,ea.A)(t,"api_error_code");(0,b.PM)(`mweb.mobile_login_form.magic_link_email_send.error.${o}`),o===E.gE?(h(({hideToast:e})=>(0,A.jsx)(y.A,{duration:5e3,onHide:e,text:u._('This email isn\u2019t associated with a Pinterest account. Please sign up or try again', 'error.mobile_login_form_magic_link.no_user', 'Error message shown when a user tries to login and their account is not found')})),m("/signup/step1/",{state:{email:e,next:(0,R.A)(f.search).next}})):o===E.l4?(h(({hideToast:e})=>(0,A.jsx)(y.A,{duration:5e3,onHide:e,text:u._('Magic link isn\u2019t supported for accounts using two-factor authentication. Try another login method', 'error.mobile_login_form_magic_link.mfa_not_supported', 'Error message for magic link email login request because two-factor authentication is not supported')})),a(!1)):v((0,ea.A)(t,"message")??u._('Something went wrong on our end, please try again', 'error.mobile_login_form_magic_link.generic', 'Generic error for magic link email login request'))}},F=async()=>{(0,b.PM)("mweb.mobile_login_form.magic_link.continue_click"),(e&&(0,el.Ay)(e)||(v(T),L(!0),(0,b.PM)("mweb.mobile_login_form.magic_link_email_input.regex_error"),0))&&(C(),P(()=>{h(({hideToast:e})=>(0,A.jsx)(y.A,{duration:5e3,onHide:e,text:u._('Your email may have bounced. Please try another login method.', 'error.mobile_login_form_magic_link.email_bounced', 'Error for when the email may have bounced')}))}))};return(0,A.jsxs)(l.az,{children:[(0,A.jsx)(er.default,{disableRedirect:!0,onTouch:()=>{"EMAIL_INPUT"===w?a(!1):"CHECK_EMAIL"===w?x("EMAIL_INPUT"):"CONTINUE_WITH_PASSWORD"===w&&x("CHECK_EMAIL")}}),(0,A.jsx)(l.az,{marginBottom:6,children:(0,A.jsx)(l.so,{alignItems:"center",justifyContent:"center",children:(0,A.jsx)(l._Y,{accessibilityLevel:1,overflow:"normal",size:"500",children:"CHECK_EMAIL"===w?u._('Check your email', 'loginFormMagicLink.checkEmail.heading', 'Heading for magic link check email step'):u._('Log in to Pinterest', 'loginFormMagicLink.emailInput.heading', 'Heading for magic link email input or password step')})})}),(0,A.jsx)(l.az,{paddingX:4,children:(()=>{switch(w){case"EMAIL_INPUT":return(0,A.jsxs)(l.az,{marginTop:3,children:[(0,A.jsx)(l.A_,{errorMessage:z||o,id:"email",onBlur:d,onChange:({value:e})=>{t({value:e}),v(""),L(!1)},placeholder:u._('Email', 'loginFormMagicLink.emailInput.placeholder', 'Placeholder text for email input on magic link login'),size:"lg",type:"email",value:e}),(0,A.jsx)(l.az,{marginBottom:4,marginTop:4,children:(0,A.jsx)(l.$n,{color:"primary",disabled:S||!r,fullWidth:!0,onClick:F,size:"md",text:u._('Continue', 'loginFormMagicLink.emailInput.submitButton', 'Button text to submit email and proceed to check email step')})}),_({isDividerOnTop:!0,showMagicLink:!1})]});case"CHECK_EMAIL":return(0,A.jsxs)(l.az,{marginBottom:3,children:[(0,A.jsx)(l.az,{marginBottom:2,marginEnd:5,marginStart:5,children:(0,A.jsx)(l.KJ,{align:"center",size:"200",children:(0,j.vQ)(u._('Use the login link we sent to {{ email }} to log in', 'loginFormMagicLink.checkEmail.message', 'Message asking user to check their email for the login link. email: the email address where the login link was sent'),{email:e})})}),_({isDividerOnTop:!0,showMagicLink:!1,customLoginOption:(0,A.jsx)(l.az,{marginBottom:2,children:(0,A.jsx)(ei.A,{onClick:()=>x("CONTINUE_WITH_PASSWORD")})})})]});case"CONTINUE_WITH_PASSWORD":return(0,A.jsx)(l.az,{marginTop:3,children:c});default:return null}})()}),g]})}var ed=t(518622);let e_=function({href:e,state:o,onClick:t,children:s}){let{state:i}=(0,n.zy)(),a=(0,ed.A)({href:{pathname:e,state:{...i,...o}}});return(0,A.jsx)(l.N_,{href:e,onClick:({event:e,dangerouslyDisableOnNavigation:o})=>{o(),t(),a({event:e})},children:s})};var eh=t(518901),eg=t(246093),eu=t(579137),em=t(197197);function ep(e,o,t){var s;return(o="symbol"==typeof(s=function(e,o){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var s=t.call(e,o||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===o?String:Number)(e)}(o,"string"))?s:s+"")in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,e}let ef=e=>(0,R.A)(e.search).next||e.state&&e.state.next||"/";class eb extends i.PureComponent{constructor(...e){let o;super(...e),ep(this,"state",{apiErrorCode:0,email:(o=this.props.location).state&&o.state.email||"",isLoading:!1,isValid:!1,isSsoFlow:!1,password:"",recaptchaV3Token:"default",emailValidationError:"",passwordValidationError:"",optOutFromPersonalizedForm:!1,shouldShowSignUpButton:!1,hasKeychainErrorShown:!0,showLoginRateLimitedModal:!1,showLoginAssistanceGoogleModal:!1,isSsoEmail:!1,exchangeCodeToTokenUrl:"",existingUserSso:!1,existingUserIsSso:!1,ssoAuthorizationUri:"",showInfoBanner:!1,infoBannerMessage:"",showQRAppErrorBanner:!1,showMagicLinkForm:!1}),ep(this,"clearPersonalizedLoginFromEmail",e=>{let{navigate:o,location:t}=this.props;if(t.state&&t.state.userInfo){let{userInfo:s,...i}=t.state;o(e?"/":"/login",{replace:!0,state:i})}}),ep(this,"onLoginClick",()=>{this.trackButtonTap(30),this.props.emailLoginOnlyForRecoverAccount&&this.props.logContextEvent({event_type:15392,component:15214,element:30})}),ep(this,"onSignUpClick",()=>{let{navigate:e,location:o,isAppFactoryOAuth:t,attributionLabel:s,trackConversionUpsell:i}=this.props;this.trackButtonTap(31),i({eventType:14688,component:14215,upsellReason:s,incrementUpsellReasonCounter:!1}),e("/signup/step1/",{state:{email:this.state.email,password:this.state.password,isSignUpFromLoginError:!0,...o.state,isAppFactoryOAuth:t,attributionLabel:s}})}),ep(this,"trackButtonTap",e=>{let{isAuthenticated:o,isLimitedLoginUser:t,logContextEvent:s,trackConversionUpsell:i}=this.props;s({view_type:9,element:e,event_type:102,aux_data:{...o?{login_state:t?T.A.LIMITED:T.A.DEFAULT}:{}}}),i({eventType:14689,element:e})}),ep(this,"handleNotYouClick",()=>{this.clearPersonalizedLoginFromEmail(),this.trackButtonTap(10879),this.setState({email:"",optOutFromPersonalizedForm:!0}),(0,b.uq)("click_change_signin_account")}),ep(this,"handleNoAccountClick",()=>{let{attributionLabel:e,trackConversionUpsell:o}=this.props;this.clearPersonalizedLoginFromEmail(!0),this.trackButtonTap(10880),o({eventType:14688,component:14215,upsellReason:e,incrementUpsellReasonCounter:!1,viewType:10,viewParameter:47}),(0,b.uq)("click_toggle_signup")}),ep(this,"handlePasswordReset",()=>{let{navigate:e,logContextEvent:o,attributionLabel:t}=this.props,{email:s}=this.state;this.trackButtonTap(10881);let i=(0,K.fb)(s,this.emailValidators());s&&!i&&(o({event_type:51,view_type:9,view_parameter:63}),(0,k.A)({url:"/v3/users/forgot_password/",method:"POST",data:{username_or_email:s,type:"reset"}}).then(()=>{e("/password/reset/sent/",{replace:!0,state:{destinationEmail:s,fromLogin:!0,attributionLabel:t}}),this.setState({apiErrorCode:0})}))}),ep(this,"validateEmail",async({showTooltip:e})=>{let{email:o}=this.state,t=(0,K.fb)(o,this.emailValidators()),s=!t&&!this.state.passwordValidationError;s&&this.checkIfUserIsSso({isEmailPasswordValid:s}),e||s?this.setState({emailValidationError:t,isValid:s}):this.setState({isValid:s})}),ep(this,"checkIfUserIsSso",async({hasInitialEmail:e,isEmailPasswordValid:o})=>{let{email:t}=this.state,{verifySsoUser:s}=this.props,i=o??this.state.isValid,{isSso:a,existingUser:n,existingUserIsSso:l,authorizationUri:r,exchangeCodeToTokenUrl:c}=await s(t),d=!!(a&&(!n||l));this.setState({exchangeCodeToTokenUrl:c??"",isSsoEmail:a,isSsoFlow:d,existingUserSso:!!n,existingUserIsSso:!!l,ssoAuthorizationUri:r??"",isValid:!!d&&!!e||i})}),ep(this,"debouncedCheckIfSsoUser",(0,_.A)(async()=>{let{email:e}=this.state;(0,K.fb)(e,this.emailValidators())||this.checkIfUserIsSso({hasInitialEmail:!1})},300)),ep(this,"validatePassword",e=>{let{password:o}=this.state,t=(0,K.fb)(o,[(0,K.mg)({message:this.props.i18n._('The password you entered is incorrect.', 'Password validation error', 'Password validation error')})]),s=!t&&!this.state.emailValidationError;e||s?this.setState({passwordValidationError:t,isValid:s}):this.setState({isValid:s})}),ep(this,"validateEmailOnBlur",()=>{setTimeout(()=>{this.validateEmail({showTooltip:!0})},0)}),ep(this,"validatePasswordOnBlur",()=>{let{password:e}=this.state;e&&setTimeout(()=>{this.validatePassword(!0)},0)}),ep(this,"emailValidators",()=>[(0,K.Ps)({message:this.props.i18n._('Not a valid email.', 'Email field validation error message', 'Email field validation error message')}),(0,K.mg)({message:this.props.i18n._('You missed a spot! Don\'t forget to add your email.', 'Email validation error', 'Email validation error')})]),ep(this,"getSoftBannedErrorMsg",()=>{let{i18n:e}=this.props;return(0,A.jsx)(l.KJ,{color:"error",size:"200",children:(0,j.vQ)(e._('We noticed some strange activity on your account. {{ resetPasswordLink }} or log in with Facebook or Google to get back into your account.', 'duplo.loginForm.softBanned.errorMessage', 'Error message when user is soft banned, resetPasswordLink: link to reset password flow with text \'Reset your password\''),{resetPasswordLink:(0,A.jsx)(l.az,{display:"inlineBlock",children:(0,A.jsx)(l.Rp,{onTap:this.handlePasswordReset,children:(0,A.jsx)(l.KJ,{inline:!0,underline:!0,children:e._('Reset your password', 'duplo.loginForm.SoftBanned.passwordReset', 'Link text for password reset')},"err_reset_link")})})})},"err_text")}),ep(this,"handleChangeEmail",({value:e})=>{this.setState({email:e,shouldShowSignUpButton:!1,hasKeychainErrorShown:!0,isSsoEmail:!1,isSsoFlow:!1,showInfoBanner:!1},()=>{this.validateEmail({}),this.debouncedCheckIfSsoUser()})}),ep(this,"handleChangePassword",({value:e})=>this.setState({password:e,hasKeychainErrorShown:!0},this.validatePassword)),ep(this,"handleLoginFailure",e=>{if(e.isArkoseChallengeRequired)return void this.setState({isLoading:!1});let{showToast:o,i18n:t,checkExperiment:s}=this.props,{email:i}=this.state,a=e.api_error_code===E.WT||e.api_error_code===E.k8,n={},l=e.api_error_code===E.Ty||e.message?{passwordValidationError:e.message}:{};if(a)l={passwordValidationError:this.getSoftBannedErrorMsg()};else if(e.api_error_code===E.WG){(0,b.PM)("unauth.mweb.login_form.error.invalid_password_google_user");let e=s("mweb_unauth_assist_google_connected_users",{dangerouslySkipActivation:!0}).group.includes("banner");e&&(n={showInfoBanner:!0,infoBannerMessage:t._('Looks like your account is connected to Google. Use Google button to log in', 'mweb.unauth.loginForm.badPassword.googleConnected.bannerMessage', 'A banner message that directs the user to login using the Google sign-in button')}),l={passwordValidationError:t._('The password you entered is incorrect.', 'mweb.unauth.loginForm.badPassword.googleConnected.passwordError', 'An error message under the password input field warning the user that they inputted a bad password'),showLoginAssistanceGoogleModal:!e}}else e.api_error_code===E.h8&&e.message?(o(({hideToast:o})=>(0,A.jsx)(y.A,{onHide:o,text:e.message||""})),l={}):e.api_error_code===E.Um?l=i?{emailValidationError:e.message,shouldShowSignUpButton:!0}:{emailValidationError:e.message}:null!==e.api_error_code&&void 0!==e.api_error_code&&E.oI.includes(e.api_error_code)&&(l={emailValidationError:"",showLoginRateLimitedModal:!0});this.setState({isLoading:!1,apiErrorCode:e.api_error_code||0,...l,...n}),(0,M.x6)(e=>this.setState({recaptchaV3Token:e}),()=>{},M.pW)}),ep(this,"handleLogin",e=>{let{fingerprintData:o}=this.props;o&&!o.current.submitTriggeredTime&&(o.current.submitTriggeredTime=performance.now()),e&&e.preventDefault();let{navigate:t,location:s,login:i,showToast:a,isAuthenticated:n,isLimitedLoginUser:l,isSwitchAccount:r,noImmediateRedirect:c,attributionLabel:d}=this.props,{email:_,password:h,recaptchaV3Token:g}=this.state,{authenticateWithSso:u}=this.props,{isSsoEmail:m,exchangeCodeToTokenUrl:p,existingUserSso:f,existingUserIsSso:w,ssoAuthorizationUri:x}=this.state;if(m){if(!f)return void this.props.navigate("/signup/step1/",{state:{email:this.state.email,isSignUpFromLoginError:!1,...s.state,attributionLabel:d}});else if(w){this.trackButtonTap(14367),u({callbacks:{success:e=>{let{authCode:o,state:a}=e;_&&o&&(this.setState({isLoading:!0}),i({sso_user_email:_,sso_auth_code:o,sso_state:a},t,ef(s),{isSwitchAccount:r,recaptchaV3Token:g,noImmediateRedirect:c,component:"LoginFormClassComponent",container:this.props.container},{event_type:7534,view_type:9,view_parameter:63,aux_data:{...n?{login_state:l?T.A.LIMITED:T.A.DEFAULT}:{},signup_login_method:C.A.SSO,upsell_reason:d}}).catch(e=>{(0,b.PM)("unauth.mweb.login.sso.login.error",{code:e.api_error_code,message:e.message}),this.handleLoginFailure(e)}))},error:e=>{(0,b.PM)("unauth.mweb.login.sso.autheticateWithSso.error",{code:e.api_error_code,message:e.message}),this.setState({isLoading:!1}),e.message&&a(({hideToast:o})=>(0,A.jsx)(y.A,{onHide:o,text:e.message||""}))}},exchangeCodeToTokenUrl:p,isLogin:!0,modalUrl:x??""});return}}i({username_or_email:_,password:h},t,ef(s),{isSwitchAccount:r,recaptchaV3Token:g,noImmediateRedirect:c,fingerprintData:o,component:"LoginFormClassComponent",container:this.props.container},{event_type:7534,view_type:9,view_parameter:63,aux_data:{...n?{login_state:l?T.A.LIMITED:T.A.DEFAULT}:{},signup_login_method:C.A.EMAIL,upsell_reason:d}}).catch(e=>this.handleLoginFailure(e)),this.setState({isLoading:!0})}),ep(this,"handleShowMagicLinkForm",e=>{this.setState({showMagicLinkForm:e??!0})}),ep(this,"renderPersonalizedLogin",(e,o)=>{let{isAppFactoryOAuth:t,location:s,noImmediateRedirect:a,attributionLabel:n,emailLoginOnlyForRecoverAccount:r,onForgetPasswordForFacebookRecover:c,lookedupEmail:d}=this.props,{emailValidationError:_,passwordValidationError:h,isSsoFlow:g,isValid:u,password:m,shouldShowSignUpButton:p}=this.state,{connectedToFacebook:f,connectedToGoogle:b,email:w,firstName:x,hasPassword:P,avatarSrc:z}={connectedToFacebook:e.connected_to_facebook,connectedToGoogle:e.connected_to_google||!!e.gplus_url,email:e.email,firstName:e.first_name,hasPassword:e.has_password,avatarSrc:e.image_medium_url||e.medium_image_url||""},k=!!s.state&&!!s.state.userInfo,y=!P&&!f&&!b,S=P||y,L=b||y,E=S&&(f||y||L)&&!g,T=x?(0,j.vQ)(this.props.i18n._('Welcome back, {{name}}!', 'Heading on personalized login page, followed by user\'s name', 'Heading on personalized login page, followed by user\'s name'),{name:x}):this.props.i18n._('Welcome back!', 'Welcome message on user login page', 'Welcome message on user login page'),C=()=>S&&(0,A.jsx)(Q,{email:(w??"")||(d??""),emailLoginOnlyForRecoverAccount:r,emailValidationError:_,handleChangeEmail:this.handleChangeEmail,handleChangePassword:this.handleChangePassword,handlePasswordReset:this.handlePasswordReset,hideEmailField:!1,isSsoFlow:g,isValid:u,onForgetPasswordForFacebookRecover:c,onLoginClick:this.onLoginClick,onSignUpClick:this.onSignUpClick,onSubmit:this.handleLogin,password:m,passwordValidationError:h,shouldShowSignUpButton:p,showEmailAsText:!0,validateEmailOnBlur:this.validateEmailOnBlur,validatePasswordOnBlur:this.validatePasswordOnBlur}),F=()=>(0,A.jsx)(ee.A,{attributionLabel:n,container:"LoginFormClassComponent",google:L,line:y,magicLink:o,next:ef(s),noImmediateRedirect:a,onMagicLinkTap:()=>this.handleShowMagicLinkForm(!0),phoneNumber:!0});return(0,A.jsxs)(i.Fragment,{children:[k&&(0,A.jsx)(er.default,{}),(0,A.jsxs)(i.Fragment,{children:[(0,A.jsxs)(l.az,{alignItems:"center",direction:"column",display:"flex",justifyContent:"center",marginBottom:S?-3:5,marginTop:5,children:[(0,A.jsx)(l.so,{alignItems:"stretch",justifyContent:"center",children:(0,A.jsx)(l._Y,{accessibilityLevel:1,overflow:"normal",size:"400",children:T})}),(0,A.jsx)(l.az,{marginBottom:3,marginTop:3,children:(0,A.jsx)(v.eu,{name:x||"",size:"lg",src:z})}),!S&&(0,A.jsx)(l.az,{children:(0,A.jsx)(l.KJ,{align:"center",children:w})})]}),(0,A.jsxs)(l.az,{marginBottom:6,marginEnd:"auto",marginStart:"auto",marginTop:3,maxWidth:400,children:[C(),E&&(0,A.jsx)(l.az,{marginBottom:3,marginTop:3,children:(0,A.jsx)(l.KJ,{align:"center",size:"100",weight:"bold",children:this.props.i18n._('OR', 'Separator for email login button and social login button', 'Separator for email login button and social login button')})}),!g&&F()]})]}),(0,A.jsxs)(l.az,{alignItems:"center",direction:"column",display:"flex",flex:"grow",justifyContent:"center",marginTop:2,children:[(0,A.jsxs)(l.az,{alignItems:"start","data-test-id":"login-switch-account",direction:"row",display:"flex",justifyContent:"center",wrap:!0,children:[(0,A.jsx)(l.az,{marginEnd:1,children:(0,A.jsx)(l.KJ,{align:"center",inline:!0,children:this.props.i18n._('Not you?', 'Short message on the bottom of the login modal that prompts a user to log in to a different account', 'Short message on the bottom of the login modal that prompts a user to log in to a different account')})}),(0,A.jsx)(l.KJ,{color:"default",inline:!0,weight:"bold",children:(0,A.jsx)(e_,{href:`/login/${s.search||""}`,onClick:this.handleNotYouClick,children:this.props.i18n._('Log in with a different account', 'Short message on the bottom of the login modal that prompts a user to log in to a different account', 'Short message on the bottom of the login modal that prompts a user to log in to a different account')})})]}),(0,A.jsxs)(l.az,{display:"flex",justifyContent:"center",marginTop:4,children:[(0,A.jsx)(l.az,{"data-test-id":"signup-modal-personalized",marginEnd:1,children:(0,A.jsx)(l.KJ,{children:this.props.i18n._('No Account?', 'Prompt for signing up', 'Prompt for signing up')})}),(0,A.jsx)(l.KJ,{color:"default",weight:"bold",children:(0,A.jsx)(e_,{href:"/signup/step1/",onClick:this.handleNoAccountClick,state:{...s.state,isAppFactoryOAuth:t,attributionLabel:n},children:this.props.i18n._('Sign up', 'Prompt for signing up', 'Prompt for signing up')})})]})]})]})}),ep(this,"renderLoginButtons",({isDividerOnTop:e,showMagicLink:o,customLoginOption:t})=>{if(this.state.isSsoFlow)return null;let{isAppFactoryOAuth:s,isBeforeHydration:i,location:a,noImmediateRedirect:n,attributionLabel:r,i18n:d}=this.props,_=(0,B.y1)().getItem(c.ZH),h=(0,A.jsx)(ee.A,{apple:!i&&!!_||s,attributionLabel:r,container:"LoginFormClassComponent",google:!0,line:!0,magicLink:o,next:ef(a),noImmediateRedirect:n,onMagicLinkTap:()=>this.handleShowMagicLinkForm(!0),phoneNumber:!0}),g=(0,A.jsx)(l.az,{marginBottom:2*!!e,marginTop:2*!e,children:(0,A.jsx)(l.KJ,{align:"center",size:"200",weight:"bold",children:d._('OR', 'Separator for email login button and social login button', 'Separator for email login button and social login button')})});return e?(0,A.jsxs)(l.az,{children:[g,t,h]}):(0,A.jsxs)(l.az,{children:[t,h,g]})}),ep(this,"renderInfoBanner",()=>{let{infoBannerMessage:e}=this.state,{i18n:o}=this.props;return(0,A.jsxs)(l.az,{alignItems:"center",color:"infoWeak",direction:"row",display:"flex",paddingX:4,paddingY:4,rounding:400,children:[(0,A.jsx)(l.az,{marginEnd:4,children:(0,A.jsx)(l.In,{accessibilityLabel:o._('Info icon on the login form info banner', 'mweb.unauth.loginForm.infoBanner.icon', 'Info icon on the login form info banner'),color:"info",icon:"circle-information",size:20})}),(0,A.jsx)(l.KJ,{inline:!0,children:e})]})})}componentDidMount(){let{navigate:e,location:o,showToast:t}=this.props;if(o.state&&o.state.shouldShowAccountExistsToast&&(t(({hideToast:e})=>(0,A.jsx)(y.A,{onHide:e,text:this.props.i18n._('Looks like you already have a Pinterest account. Please log in.', 'Toast showing that a user already has a Pinterest account and can login normally', 'Toast showing that a user already has a Pinterest account and can login normally')})),o.state)){let{shouldShowAccountExistsToast:t,...s}=o.state;e("/login/",{replace:!0,state:s})}(0,R.A)(o.search).message===S.Pg&&t(({hideToast:e})=>(0,A.jsx)(y.A,{duration:1e4,onHide:e,text:(0,L.A)(this.props.i18n,o)}));let s=()=>{(0,M.x6)(e=>this.setState({recaptchaV3Token:e}),()=>{},M.pW)};if(s(),setInterval(s,M.oX),o.state&&o.state.keychainiOSAutologinError){let e=o.state.keychainiOSAutologinError,t=e.code,s=t===E.Um?{emailValidationError:e.message}:{passwordValidationError:e.message};this.setState({apiErrorCode:t,hasKeychainErrorShown:!1,...s})}o.state?.userInfo?.email&&this.checkIfUserIsSso({hasInitialEmail:!0})}static getDerivedStateFromProps(e,o){let{isAuthenticated:t,isLimitedLoginUser:s,location:i,loggedOutUserInfo:a,viewingUser:n,navigate:l}=e;return(0,R.A)(i.search).show_qr_app_error?(l("/login/",{replace:!0}),{showQRAppErrorBanner:!0}):i.state&&i.state.userInfo?{email:i.state.userInfo.email}:t||!a||o.optOutFromPersonalizedForm?s&&n&&!o.optOutFromPersonalizedForm?{email:n.email}:null:{email:a.email}}render(){let{isLimitedLoginUser:e,location:o,loggedOutUserInfo:t,isAppFactoryOAuth:s,viewingUser:a,showPLPBanner:n,plpBannerPin:r,i18n:c,hasSenderContext:d,showKeychainError:_,attributionLabel:h,checkExperiment:g,emailLoginOnlyForRecoverAccount:u,onForgetPasswordForFacebookRecover:m,lookedupEmail:p,isLoadingFingerprintContext:f,showToast:b}=this.props,w=g("mweb_unauth_magic_link_login").anyEnabled,x=o.state&&o.state.shouldShowLoginBelow||w||!1,{apiErrorCode:k,email:v,emailValidationError:y,passwordValidationError:j,isLoading:S,isSsoFlow:L,isValid:T,optOutFromPersonalizedForm:C,password:F,shouldShowSignUpButton:I,hasKeychainErrorShown:M,showLoginRateLimitedModal:B,showLoginAssistanceGoogleModal:O,showInfoBanner:U,infoBannerMessage:W,showQRAppErrorBanner:K,showMagicLinkForm:J}=this.state,V=e?a:t;o.state&&o.state.userInfo&&(V=o.state.userInfo);let N=g("mweb_unauth_deprecation_fb_banner_iteration").anyEnabled,H=k>0&&k===E.f7,G=e=>(0,A.jsxs)(i.Fragment,{children:[!x&&!u&&this.renderLoginButtons({isDividerOnTop:x,showMagicLink:e}),(0,A.jsx)(Q,{email:v||(p??""),emailLoginOnlyForRecoverAccount:u??!1,emailValidationError:y,handleChangeEmail:this.handleChangeEmail,handleChangePassword:this.handleChangePassword,handlePasswordReset:this.handlePasswordReset,isSIWAError:H,isSsoFlow:L,isValid:T,onForgetPasswordForFacebookRecover:m,onLoginClick:this.onLoginClick,onSignUpClick:this.onSignUpClick,onSubmit:this.handleLogin,password:F,passwordValidationError:j,shouldShowSignUpButton:I,validateEmailOnBlur:this.validateEmailOnBlur,validatePasswordOnBlur:this.validatePasswordOnBlur}),x&&!u&&this.renderLoginButtons({isDividerOnTop:x,showMagicLink:e})]}),q=(0,A.jsxs)(l.az,{alignItems:"center",direction:"column",display:"flex",flex:"grow",justifyContent:"center",marginTop:2,children:[(0,A.jsxs)(l.so,{alignItems:"stretch",justifyContent:"center",children:[(0,A.jsx)(l.az,{"data-test-id":"signup-link",marginEnd:1,children:(0,A.jsx)(l.KJ,{children:c._('No Account?', 'Prompt for signing up', 'Prompt for signing up')})}),(0,A.jsx)(l.KJ,{color:"default",weight:"bold",children:(0,A.jsx)(e_,{href:"/signup/step1/",onClick:this.handleNoAccountClick,state:{email:v,isAppFactoryOAuth:s,next:(0,R.A)(o.search).next,attributionLabel:h},children:c._('Sign up', 'Prompt for signing up', 'Prompt for signing up')})})]}),!s&&(0,A.jsx)(eu.A,{})]});if(J)return(0,A.jsx)(ec,{email:v,emailValidationError:y,handleChangeEmail:this.handleChangeEmail,handleShowMagicLinkForm:this.handleShowMagicLinkForm,isValid:T,loginOptions:G(!1),renderLoginButtons:this.renderLoginButtons,showToast:b,signupOptions:q,validateEmailOnBlur:this.validateEmailOnBlur});let Y=(0,A.jsxs)(i.Fragment,{children:[(N||w)&&!J&&!u&&(0,A.jsx)(l.az,{marginBottom:6,marginTop:6,children:(0,A.jsx)(l.so,{alignItems:"stretch",justifyContent:"center",children:(0,A.jsx)(l._Y,{accessibilityLevel:1,overflow:"normal",size:"500",children:c._('Log in to Pinterest', 'loginForm.header.title', 'Main heading displayed at the top of the login page when Facebook deprecation banner is shown')})})}),(0,A.jsxs)(l.az,{"data-test-id":"duplo-login-form",marginBottom:6,marginEnd:"auto",marginStart:"auto",marginTop:3,maxWidth:400,children:[G(w),N&&!u&&(0,A.jsx)(z,{})]}),!u&&q]});return _?(0,A.jsxs)(i.Fragment,{children:[(0,A.jsxs)(l.az,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(230, 0, 35, 0.08)",transition:"transform 400ms ease-in-out",transform:M?"translateY(-120%)":"translateY(0%)"}},display:"flex",height:52,justifyContent:"center",children:[(0,A.jsx)(l.nW,{accessibilityLabel:c._('Workflow status problem accessibility label', 'mweb.unauth.keychain_autologin.login_page.error_message.icon', 'Accessibility label for error message icon'),type:"problem"}),(0,A.jsx)(l.az,{marginStart:2,children:(0,A.jsx)(l.KJ,{color:"default",children:c._('Oops! We couldn\'t log you in', 'mweb.unauth.keychain_autologin.login_page.error_message', 'Error message to let user know there was an issue logging them in')})})]}),(0,A.jsxs)(l.az,{paddingX:4*!!n,children:[V&&!C?this.renderPersonalizedLogin(V,w):Y,(S||f)&&(0,A.jsx)(D.A,{})]})]}):(0,A.jsxs)(i.Fragment,{children:[B&&(0,A.jsx)(et.A,{onDismiss:()=>this.setState({showLoginRateLimitedModal:!1})}),O&&(0,A.jsx)(eo,{onDismiss:()=>this.setState({showLoginAssistanceGoogleModal:!1})}),!u&&!N&&(0,A.jsx)(P,{}),K&&(0,A.jsx)(es.default,{}),U&&W&&this.renderInfoBanner(),(d||n&&r)&&(0,A.jsx)(em.A,{pin:d?void 0:r??void 0}),(0,A.jsxs)(l.az,{paddingX:4*!!n,children:[V&&!C?this.renderPersonalizedLogin(V,w):Y,(S||f)&&(0,A.jsx)(D.A,{})]})]})}}function ew(e){(0,i.useEffect)(()=>{(0,s.A)("LoginForm","/app/www/pages/duplo/LoginForm.tsx")},[]);let o=(0,p.A)(),t=(0,n.Zp)(),l=(0,n.zy)(),c=(0,a.wA)(),_=(0,eh.v)(),{showToast:h}=(0,U.CG)(),{isAuthenticated:g,loggedOutUserInfo:m}=(0,a.d4)(e=>e.session),f=(0,eg.Eo)(),b=(0,d.A)(),x=(0,W.A)(),{trackConversionUpsell:P}=(0,O.A)(),z=(0,u._8)(),{authenticateWithSso:k,verifySsoUser:v}=(0,F.Ay)(),{checkExperiment:y}=(0,I.A)(),j=(0,J.AT)(),S=(j?.data?.upsellData?.mwebSocialContextExpGroup??"").startsWith("enabled"),{fingerprintData:L,setupFingerprintSdks:E,isLoadingFingerprintContext:T}=(0,r.e)()??{isLoadingFingerprintContext:!1};return(0,w.A)(()=>{E?.()}),(0,A.jsx)(eb,{...e,attributionLabel:l.state?.attributionLabel,authenticateWithSso:k,checkExperiment:y,dispatch:c,fingerprintData:L,hasSenderContext:S,i18n:o,isAuthenticated:g,isBeforeHydration:x,isLimitedLoginUser:(0,V.b1)(f),isLoadingFingerprintContext:T,location:l,logContextEvent:b,loggedOutUserInfo:m,login:_,navigate:t,requestContext:z,showToast:h,trackConversionUpsell:P,verifySsoUser:v,viewingUser:f})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/32031-72dd5b112d749aa5.mjs.map