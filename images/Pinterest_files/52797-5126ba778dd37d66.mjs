(self.modernJsonp=self.modernJsonp||[]).push([["52797"],{529495(e,l,i){var t,n,a,s,r,o,d;i.r(l),i.d(l,{default:()=>c});let p={fragment:{argumentDefinitions:t=[{defaultValue:null,kind:"LocalArgument",name:"inviteCode"}],kind:"Fragment",metadata:null,name:"UnauthCloseupInviteUpsellQuery",selections:[{alias:null,args:n=[{kind:"Variable",name:"inviteCode",variableName:"inviteCode"}],concreteType:null,kind:"LinkedField",name:"v3GetInviteCodeQuery",plural:!1,selections:[a={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"InviteCode",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"sender",plural:!1,selections:[s={alias:null,args:null,kind:"ScalarField",name:"firstName",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"imageMediumUrl",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null}],storageKey:null}],type:"InviteCodeResponse",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"UnauthCloseupInviteUpsellQuery",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"v3GetInviteCodeQuery",plural:!1,selections:[a,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"InviteCode",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"sender",plural:!1,selections:[s,r,o,d={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null},d],storageKey:null}],type:"InviteCodeResponse",abstractKey:null}],storageKey:null}]},params:{id:"4610a8b7fe41310eb2db231b8c1171930d91f797fbc7fd321ec6682cb48a3711",metadata:{},name:"UnauthCloseupInviteUpsellQuery",operationKind:"query",text:null}};p.hash="04834691a929e56b42c6699e90a97155";let c=p},581650(e,l,i){i.r(l),i.d(l,{default:()=>f});var t=i(335831),n=i(657140),a=i(836737),s=i(921831),r=i(625277),o=i(306869),d=i(396901),p=i(259628),c=i(376195),_=i(498395),u=i(798923),h=i(491149),m=i(257470),g=i(135656);function f({accessibilityModalLabel:e,align:l="center",allowClickAndDrag:i,allowScroll:f=!1,cancelButtonBackgroundColor:w,customizedHeading:y,children:x,closeOnOutsideClick:b=!0,footer:v,heading:A,isOpen:j,mobileAccessibilityCloseIconLabel:z,mobileHeadingSize:k,mobileHideCloseIcon:I,mobileIsFooter:P,mobileIsFullscreen:C,mobileIsFullpage:S,mobileIsSlideUp:T,onCloseButtonClick:L,onDismiss:U,shouldMoveCancelButtonRight:R=!1,subHeading:K,type:M,zIndex:F,mobileCancelButtonPaddingTop:E,mobileCancelButtonPaddingRight:N,mobileTopOffset:Q}){(0,n.useEffect)(()=>{(0,t.A)("MobileModal","/app/packages/gestaltExtensions/Modal/MobileModal.tsx")},[]);let W=(0,d.A)(),{isRTL:V}=(0,c._8)(),B=(0,n.useRef)(null),[G,H]=(0,n.useState)(!1),{setAppFocusState:O}=(0,m.Y)(),D=(0,h.Ay)(),{isDarkMode:J}=(0,r.D2)();(0,n.useEffect)(()=>(B.current=(0,s.A)(()=>{B.current&&H(!0)}),()=>{"u">typeof window&&Object.prototype.hasOwnProperty.call(window,"cancelAnimationFrame")&&B.current&&(window.cancelAnimationFrame(B.current),B.current=null)}),[]),(0,n.useEffect)(()=>(j?(p.A.pause(),O(!1),(0,u.PM)(`mweb_unauth.mobile_modal.${M||"unknown_type"}.did_mount.is_open.true`)):(p.A.resume(),O(!0)),()=>{j&&(p.A.resume(),O(!0),(0,u.PM)(`mweb_unauth.mobile_modal.${M||"unknown_type"}.did_mount.is_open.false`))}),[O,j]),(0,n.useEffect)(()=>{let e=j&&!f;return e&&(()=>{if(document.body){let{body:{style:e}}=document;e.overflow="hidden",e.touchAction="none"}})(),()=>{e&&(()=>{if(document.body){let{body:{style:e}}=document;e.overflow="visible",e.touchAction="auto"}})()}},[j,f]);let $=()=>S?"fullpage":C?"fullscreen":"euPrompt"===M?"euPrompt":"tablet"===D?"tablet":P?"footer":"signup"===M||"visual_signup"===M?"signup":"repinPage"===M?"repinPage":void 0;if(!j)return null;let X=z&&!I;return(0,g.jsx)(_.A,{allowClickAndDrag:i,children:(0,g.jsx)(a.Wd,{children:(0,g.jsxs)(a.az,{"aria-label":e,display:"inlineBlock",height:"100%",position:"relative",role:"dialog",zIndex:F||o.QN,children:[(0,g.jsx)(a.Rp,{accessibilityLabel:W._('Mobile Signup Modal Mask', 'mweb.signup_modal.mask', 'The accessibility label for the mask of mobile signup modal'),dataTestId:"mobile-modal-mask-overlay",onTap:({event:e})=>{e.clientX&&e.clientY&&(0,u.fu)(`mweb_unauth.mobile_modal.wash_tap.${M||"unknown_type"}.with_dismissal`,{x:e.clientX,y:e.clientY}),b&&U()},tapStyle:"none",children:(0,g.jsx)(a.az,{dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(0, 0, 0, .5)",touchAction:"none",transitionProperty:"opacity",transitionTimingFunction:"ease-out"}},height:"100%",left:!0,position:"fixed",top:!0,width:"100%",zIndex:F||o.QN})}),(0,g.jsxs)(a.az,{color:"default",dangerouslySetInlineStyle:T?(0,o.aj)({isFullscreen:C,isTablet:"tablet"===D,isShowing:G,isRelatedInterestsModal:"related_interests_modal"===M,isDarkMode:J}):{...(0,o.ou)({isDarkMode:J,variant:$()}),__style:{...(0,o.ou)({isDarkMode:J,variant:$()}).__style,transform:((0,o.ou)({isDarkMode:J,variant:$()}).__style?.transform||"")+(()=>{if(!Q||T||!(()=>{if("u"<typeof window)return!1;let e=Math.max(window.visualViewport?.width||0,window.innerWidth,document.documentElement.clientWidth),l=Math.max(window.visualViewport?.height||0,window.innerHeight,document.documentElement.clientHeight);return e<=380||l<=760})())return"";let e=Math.min(1,(Math.max(window.visualViewport?.width||0,window.innerWidth,document.documentElement.clientWidth)-12)/380,(Math.max(window.visualViewport?.height||0,window.innerHeight,document.documentElement.clientHeight)-12)/600);return e=Math.max(.8,e),` scale(${e})`})()}},"data-test-id":"mobile-signup-mask",position:"fixed",zIndex:F||o.QN,children:[(0,g.jsx)(a.az,{dangerouslySetInlineStyle:{__style:{backgroundColor:w||"rgba(0, 0, 0, 0)"}},children:(0,g.jsxs)(a.so,{alignItems:"center",gap:{row:2,column:0},justifyContent:R?"end":"start",width:"100%",children:[X&&!R&&(0,g.jsx)(a.az,{dangerouslySetInlineStyle:{__style:{paddingTop:E??void 0,paddingRight:N??void 0}},"data-test-id":"mobile-modal-cancel-button",padding:2,children:(0,g.jsx)(a.K0,{accessibilityLabel:z,icon:"close",iconColor:J?"subtle":"default",onClick:L||U,padding:4,size:"lg"})}),!R&&I&&"visual_signup"!==M&&(0,g.jsx)(a.az,{padding:3}),A?(0,g.jsx)(a.so.Item,{flex:"grow",children:(0,g.jsx)(a.so,{alignItems:"center",direction:"column",justifyContent:"center",children:(0,g.jsxs)(a.az,{dangerouslySetInlineStyle:{__style:z&&!I?{marginRight:V?-10:50,marginLeft:V?50:-10,paddingTop:16}:{paddingTop:16}},"data-test-id":"mobile-modal-heading",children:[C?A:(0,g.jsx)(a.KJ,{align:l,size:k||"400",weight:"bold",children:A}),K?(0,g.jsx)(a.KJ,{align:l,children:K}):null]})})}):null,y&&(0,g.jsx)(a.so.Item,{flex:"grow",children:(0,g.jsx)(a.so,{alignItems:"center",direction:"column",justifyContent:"center",children:y})}),X&&R&&(0,g.jsx)(a.az,{dangerouslySetInlineStyle:{__style:{paddingLeft:2,paddingTop:E??2,paddingBottom:2,paddingRight:N??void 0}},"data-test-id":"mobile-modal-cancel-button",children:(0,g.jsx)(a.K0,{accessibilityLabel:z,icon:"close",iconColor:J?"subtle":"default",onClick:L||U,padding:4,size:"lg"})}),R&&I&&"visual_signup"!==M&&(0,g.jsx)(a.az,{padding:3})]})}),(0,g.jsxs)(a.az,{overflow:"auto",children:[x,v]})]})]})})})}},680043(e,l,i){i.d(l,{A:()=>A});var t=i(335831),n=i(657140),a=i(129625),s=i(528989),r=i(376195),o=i(108302),d=i(764553),p=i(929962),c=i(334222),_=i(394461),u=i(653052),h=i(445532),m=i(892804);let g="http://play.google.com/store/apps/details?id=com.pinterest",f=["access_token","new_password","new_password_confirm","password","next"],w=(e,l)=>l?(0,_.A)(e,{invite_code:l}):e,y=(e,l,i)=>{if("ios"===l&&"string"==typeof e&&e.startsWith("discover/article/")){let l=e.split("/")[2];e=`discover_article/${l}/?is_deeplink=1`}return("string"==typeof e&&"shopping/"===e&&(e="?is_deeplink=1"),"string"==typeof e)?w(e,i):"ios"===l||"ipad"===l?w(e.iOS,i):"android"===l?w(e.android,i):null};var x=i(135656);function b({children:e,invite_code:l}){let{isAuthenticated:i,isBot:t,unauthId:n,userAgent:{platform:o,raw:w}}=(0,r._8)(),{logContextEvent:x}=(0,a.o)(),{checkExperiment:b}=(0,s.A)();return e(async(e,a,s)=>{x({component:14347,element:13582,event_type:700,view_type:20,view_parameter:3844,aux_data:{app_upsell_type:a}}),(({isAuthenticated:e,checkExperiment:l,deeplinkUri:i,fallbackUrl:t,invite_code:n,logContextEvent:a,platform:s,redirectToLite:r,unauthId:o,userAgent:d,app_upsell_type:w})=>{if(a?.({component:14347,element:13582,event_type:701,view_type:20,view_parameter:3844,aux_data:{app_upsell_type:w}}),i){let x=(({deeplinkUri:e,invite_code:l,platform:i,fallbackUrl:t,unauthId:n,app_upsell_type:a,checkExperiment:s})=>{let r=(0,c.mt)(),o=r.length>0&&"android"===i&&s?.("ap_android_landing_signals_deeplink_feature_gate").group==="enabled"?r.map(({pageType:e,...l})=>l).slice(0,10):null;return{deeplink_path:y(e,i,l),current_page_url:(0,h.A)("u">typeof window?window.location.href:"",f),install_id:n,utm_source:140,utm_medium:2152,app_upsell_type:a,...t?{af_r:t}:null,...o?{landing_signals:JSON.stringify({unauth_visited_pages:o})}:null}})({isAuthenticated:e,deeplinkUri:i,fallbackUrl:t,invite_code:n,platform:s,unauthId:o,userAgent:d,app_upsell_type:w,checkExperiment:l});if((0,m.GV)("mweb.deeplink",{sampleRate:1,tags:{platform:s}}),n&&(0,m.GV)("mweb.deeplink.invite_code",{sampleRate:1}),(0,m.GV)("mweb.deeplink.unauthId",{sampleRate:1,tags:{withUnauthId:!!o}}),r){(0,m.GV)("mweb.deeplink.lite_link",{sampleRate:1}),a?.({component:14347,element:13582,event_type:14540,view_type:20,view_parameter:3844,aux_data:{app_upsell_type:w}});let e=(({unauthId:e,app_upsell_type:l})=>({referrer:encodeURI((0,u.A)({utm_source:"mweb",utm_medium:"upsell",utm_campaign:"twa",utm_content:e,app_upsell_type:l}))}))({unauthId:o,app_upsell_type:w});window.location.href=(0,_.A)("http://play.google.com/store/apps/details?id=com.pinterest.twa",e)}else if("android"===s){let e=(({deeplinkUri:e,invite_code:l,platform:i,unauthId:t,app_upsell_type:n,checkExperiment:a})=>{let s=(0,c.mt)(),r=s.length>0&&"android"===i&&a?.("ap_android_landing_signals_deeplink_feature_gate").group==="enabled"&&a?.("ap_android_landing_signals_deeplink_playstore_gate").group==="enabled"?s.map(({pageType:e,...l})=>l).slice(0,10):null,o=JSON.stringify({deeplink_path:y(e,i,l),current_page_url:(0,h.A)("u">typeof window?window.location.href:"",f),install_id:t,...r?{landing_signals:{unauth_visited_pages:r}}:null});return{referrer:(0,u.A)({utm_source:"mweb",utm_medium:"upsell",utm_content:o,app_upsell_type:n})}})({deeplinkUri:i,invite_code:n,platform:s,unauthId:o,app_upsell_type:w,checkExperiment:l});(0,p.i)()?(0,p.A)().then(l=>{if(l.length>0){let e=window.location.href.endsWith("/login")?window.location.href.replace("/login","string"==typeof i?i:i.android):window.location.href,l=(0,_.A)(e,x);a?.({component:14347,element:13582,event_type:703,view_type:20,view_parameter:3844,aux_data:{app_upsell_type:w,...x.landing_signals?{landing_signals:x.landing_signals}:null}}),window.open(l)||a?.({component:14347,element:13582,event_type:702,view_type:20,view_parameter:3844,aux_data:{app_upsell_type:w}})}else a?.({component:14347,element:13582,event_type:14538,view_type:20,view_parameter:3844,aux_data:{app_upsell_type:w,...x.landing_signals?{landing_signals:x.landing_signals}:null}}),window.location.href=(0,_.A)(g,e)}).catch(()=>{(0,m.GV)("mweb_android.deeplink.playStore.error",{sampleRate:1})}):(a?.({component:14347,element:13582,event_type:14538,view_type:20,view_parameter:3844,aux_data:{app_upsell_type:w,...x.landing_signals?{landing_signals:x.landing_signals}:null}}),window.location.href=(0,_.A)(g,e))}else{if((0,m.GV)("mweb.deeplink.appsflyer_link",{sampleRate:1}),"ios"===s&&"u">typeof window&&window.location.href.includes("show_yip_modal")){window.location.href=(0,_.A)("https://pinterest.com/pinterest-predicts",x);return}a?.({component:14347,element:13582,event_type:14539,view_type:20,view_parameter:3844,aux_data:{app_upsell_type:w}}),window.location.href=(0,_.A)("https://pinterest.onelink.me/TVSr/21e04bfd",x)}}})({isAuthenticated:i,checkExperiment:b,deeplinkUri:e,fallbackUrl:s,invite_code:l,logContextEvent:x,platform:o,redirectToLite:(0,d.$m)({isBot:t,platform:o,userAgent:w}),unauthId:n,userAgent:w,app_upsell_type:a})})}let v=e=>{(0,n.useEffect)(()=>{(0,t.A)("DeepLinkNavigator","/app/www/DeepLinkNavigator.tsx")},[]);let l=(0,o.d)();return(0,x.jsx)(b,{...e,invite_code:l})};v.displayName="DeepLinkNavigator";let A=v},477327(e,l,i){i.d(l,{A:()=>r});var t=i(335831),n=i(657140),a=i(836737),s=i(135656);function r({children:e,onMouseEnter:l,onMouseLeave:i,onTouch:r,rounding:o,fullWidth:d=!1,pressState:p="none",accessibilityLabel:c,role:_,dataTestId:u}){(0,n.useEffect)(()=>{(0,t.A)("LegacyTapArea","/app/www/LegacyTapArea.tsx")},[]);let h=(Array.isArray(p)?p:[p]).includes("compress");return(0,s.jsx)(a.Rp,{accessibilityLabel:c,dataTestId:u,fullWidth:d,onMouseEnter:l&&(({event:e})=>l(e)),onMouseLeave:i&&(({event:e})=>i(e)),onTap:r&&(({event:e})=>r(e)),role:_,rounding:o,tapStyle:h?"compress":"none",children:e})}},673017(e,l,i){i.d(l,{A:()=>g});var t=i(335831),n=i(657140),a=i(278461),s=i(129625),r=i(775816),o=i(376195),d=i(798923),p=i(488265),c=i(371343),_=i(954225),u=i(680043),h=i(892804),m=i(135656);function g({children:e,componentType:l,app_upsell_type:i,isShown:g=!0}){(0,n.useEffect)(()=>{(0,t.A)("AppUpsellController","/app/www/appupsell/AppUpsellController.tsx")},[]);let f=(0,a.zy)(),{flushContextEvents:w,logContextEvent:y}=(0,s.o)(),{viewType:x,viewParameter:b}=(0,r.WQ)(),v=(0,p.A)(),{userAgent:{platform:A}}=(0,o._8)();(0,n.useEffect)(()=>{v({action:"view",item:"download-button",within:i})},[f,i,v]);let j=(0,n.useRef)(!1);(0,n.useEffect)(()=>{g&&x&&202!==x?(y({component:l||13106,element:10308,event_type:9976,view_type:x,view_parameter:b,aux_data:{app_upsell_type:i,app_upsell_is_dupe:j.current}}),j.current=!0):(0,h.GV)("webapp.track_app_upsell_viewed_invalid_parameters",{sampleRate:1,tags:{component:l,view_type:x,view_parameter:b,app_upsell_type:i,app_upsell_is_dupe:j.current}})},[x,b,l,i,y,g]);let z=(0,_.A)();return(0,n.useEffect)(()=>{z||(0,d.PM)(`mweb.app_upsell.forbidden_upsell.${i}`)},[z,i]),(0,m.jsx)(u.A,{children:t=>e({handleOpenApp:e=>{v({action:"click",item:"download-button",within:i}),(0,d.uq)("press_open_app",!0),y({component:l||13106,element:10308,event_type:102,view_type:x||202,view_parameter:b,aux_data:{app_upsell_type:i}}),y({component:l||13106,element:10308,event_type:9977,view_type:x||202,view_parameter:b,aux_data:{app_upsell_type:i}}),w(),t&&(y({component:l||13106,element:10308,event_type:1701,view_type:x||202,view_parameter:b,aux_data:{app_upsell_type:i}}),t(e?.deepLinkUri??(0,c.A)(f,"android"===A),i))}})})}},884492(e,l,i){i.d(l,{A:()=>S});var t=i(335831),n=i(657140),a=i(278461),s=i(836737),r=i(581650),o=i(396901),d=i(410899),p=i(107639),c=i(376195),_=i(508765),u=i(798923),h=i(767482),m=i(218781),g=i(491149),f=i(119795),w=i(673017),y=i(623756),x=i(768820),b=i(803361),v=i(996366),A=i(764553),j=i(863153),z=i(135656);let k=({description:e,handleDismiss:l,heading:i,i18n:t,appUpsellType:n,ctaText:a})=>(0,z.jsx)(w.A,{app_upsell_type:n,componentType:14155,children:({handleOpenApp:n})=>(0,z.jsxs)(s.so,{alignItems:"center",direction:"column",justifyContent:"center",children:[(0,z.jsx)(s.az,{paddingY:2,children:(0,z.jsx)(s._Y,{align:"center",size:"400",children:i})}),(0,z.jsx)(s.az,{width:246,children:(0,z.jsx)(s.KJ,{align:"center",size:"300",children:e})}),(0,z.jsxs)(s.az,{alignItems:"center",dangerouslySetInlineStyle:{__style:{display:"grid"}},justifyContent:"center",marginTop:5,children:[(0,z.jsx)(s.az,{marginBottom:2,width:246,children:(0,z.jsx)(s.$n,{color:"primary",fullWidth:!0,onClick:()=>{(0,x.A)(),n()},size:"lg",text:a||t._('Open app', 'mweb.auth.referred_app_upsell.open_app', 'CTA text for referred app upsell')})}),(0,z.jsx)(s.$n,{color:"secondary",fullWidth:!0,onClick:()=>{l()},size:"lg",text:t._('Continue in browser', 'mweb.auth.referred_app_upsell.continue', 'Continue text for referred app upsell')})]})]})}),I=({handleDismiss:e,i18n:l,iconSize:i,appUpsellType:t})=>(0,z.jsxs)(s.az,{alignItems:"center",bottom:!0,color:"washLight",direction:"column",display:"flex",left:!0,paddingX:5,position:"fixed",right:!0,top:!0,zIndex:new s.rk(5),children:[(0,z.jsx)(s.az,{"data-test-id":"referred-app-upsell-dismiss-button",left:!0,padding:4,position:"absolute",top:!0,children:(0,z.jsx)(s.K0,{accessibilityLabel:l._('Cancel', 'mweb.auth.referred_app_upsell.close_modal_label', 'close modal icon'),icon:"close",onClick:e,size:"sm"})}),(0,z.jsxs)(s.az,{direction:"column",display:"flex",height:"100%",justifyContent:"center",margin:"auto",maxWidth:440,children:[(0,z.jsx)(s.az,{display:"flex",justifyContent:"center",paddingY:2,children:(0,z.jsx)(s.In,{accessibilityLabel:l._('Logo', 'mweb.auth.referred_app_upsell.logo', 'logo icon'),color:"primary",icon:"pinterest",size:i})}),(0,z.jsx)(k,{appUpsellType:t,description:l._('Save ideas, interact with friends, and get inspired', 'mweb.auth.referred_app_upsell.description1', 'description for referred app upsell'),handleDismiss:e,heading:l._('Pinterest is better in the app', 'mweb.auth.referred_app_upsell.heading1', 'heading for referred app upsell'),i18n:l})]})]}),P=({backgroundImageUrl:e,handleDismiss:l,heroImage:i,i18n:t,multipleImages:n,appUpsellType:a})=>(0,z.jsxs)(s.az,{alignItems:"center",bottom:!0,color:"washLight",direction:"column",display:"flex",left:!0,paddingX:5,position:"fixed",right:!0,top:!0,zIndex:new s.rk(5),children:[(0,z.jsx)(s.az,{height:319,position:"absolute",top:!0,width:"100%",zIndex:new s.rk(2),children:(0,z.jsx)(s._V,{alt:t._('App upsell image', 'mweb.auth.referred_app_upsell.image', 'Related pin image for referred app upsell'),fit:"cover",naturalHeight:1,naturalWidth:1,src:e})}),(0,z.jsxs)(s.az,{alignItems:"center",bottom:!0,color:"washLight",dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(12px)"}},direction:"column",display:"flex",left:!0,paddingX:5,position:"absolute",right:!0,top:!0,zIndex:new s.rk(3),children:[(0,z.jsx)(s.az,{color:"default",dangerouslySetInlineStyle:{__style:{background:"transparent"}},"data-test-id":"referred-app-upsell-dismiss-button",left:!0,padding:4,position:"absolute",top:!0,children:(0,z.jsx)(s.K0,{accessibilityLabel:t._('Cancel', 'mweb.auth.referred_app_upsell.close_modal_label', 'close modal icon'),icon:"close",onClick:l,size:"sm"})}),(0,z.jsxs)(s.az,{direction:"column",display:"flex",height:"100%",justifyContent:"center",margin:"auto",maxWidth:440,children:[(0,z.jsx)(s.so,{justifyContent:"center",children:i}),(0,z.jsx)(k,{appUpsellType:a,description:n?t._('Save these ideas, get similar recs, and more', 'mweb.auth.referred_app_upsell.description2', 'description for referred app upsell'):t._('Save this idea, get similar recs, and more', 'mweb.auth.referred_app_upsell.description5', 'description for referred app upsell'),handleDismiss:l,heading:t._('It\'s better in the Pinterest app', 'mweb.auth.referred_app_upsell.heading1', 'heading for referred app upsell'),i18n:t})]})]})]}),C=({pinUrl:e,i18n:l})=>(0,z.jsx)(s.az,{height:235,marginBottom:6,overflow:"hidden",rounding:400,width:176,children:(0,z.jsx)(s._V,{alt:l._('App upsell image', 'mweb.auth.referred_app_upsell.image', 'Related pin image for referred app upsell'),fit:"cover",naturalHeight:1,naturalWidth:1,src:e})});function S({onDismiss:e,viewParameter:l,viewType:i}){(0,n.useEffect)(()=>{(0,t.A)("ReferredAppUpsell","/app/www/appupsell/ReferredAppUpsell.tsx")},[]);let S=(0,o.A)(),T=(0,g.wI)(),{isBot:L,userAgent:{platform:U,raw:R}}=(0,c._8)(),K=(0,A.$m)({isBot:L,platform:U,userAgent:R}),{trackAppUpsellDismiss:M}=(0,b.A)(),F=T?60:32,{id:E}=(0,a.g)(),N=(0,a.zy)(),{invite_code:Q}=(0,m.A)(N.search),{appUpsellType:W,uiType:V}=(0,y.E)();(0,f.A)(()=>{(0,u.PM)(`mweb.referred_app_upsell_view.${V}`)});let B=()=>{M({appUpsellType:W,viewType:i,viewParameter:l,component:14155,element:10308}),(0,x.A)(),e()},G=E??"",{data:H}=(0,_.A)(G?{name:"PinResource",options:{field_set_key:"detailed",id:G}}:null),O=(0,j.HR)()(G),{username:D,slug:J}=(0,a.g)(),{data:$}=(0,_.A)(D&&J?{name:"BoardResource",options:{username:(0,h.A)(D),slug:(0,h.A)(unescape(J||"")),field_set_key:"detailed"}}:null);if("full"===V){let e="",l=null,i=!1;if((0,p.dM)(N)&&(e=(H??O)?.images?.orig?.url||"",l=(0,z.jsx)(C,{i18n:S,pinUrl:e})),(0,p.iK)(N)&&$&&$.images&&$.images["474x"])if($.images["474x"].length>2){e=$.images["474x"][0].url||"";let t=$.images["474x"][1].url||"",n=$.images["474x"][2].url||"";i=!0,l=(0,z.jsx)(s.az,{marginBottom:7,children:(0,z.jsxs)(s.so,{children:[(0,z.jsx)(s.az,{dangerouslySetInlineStyle:{__style:{borderTopLeftRadius:"16px",borderBottomLeftRadius:"16px",marginRight:"1px"}},height:117,overflow:"hidden",width:117,children:(0,z.jsx)(s._V,{alt:S._('App upsell image', 'mweb.auth.referred_app_upsell.image', 'Related pin image for referred app upsell'),fit:"cover",naturalHeight:1,naturalWidth:1,src:e})}),(0,z.jsxs)(s.so,{direction:"column",children:[(0,z.jsx)(s.az,{dangerouslySetInlineStyle:{__style:{borderTopRightRadius:"16px",marginBottom:"1px"}},height:59,overflow:"hidden",width:57,children:(0,z.jsx)(s._V,{alt:S._('App upsell image', 'mweb.auth.referred_app_upsell.image', 'Related pin image for referred app upsell'),fit:"cover",naturalHeight:1,naturalWidth:1,src:t})}),(0,z.jsx)(s.az,{dangerouslySetInlineStyle:{__style:{borderBottomRightRadius:"16px"}},height:57,overflow:"hidden",width:58,children:(0,z.jsx)(s._V,{alt:S._('App upsell image', 'mweb.auth.referred_app_upsell.image', 'Related pin image for referred app upsell'),fit:"cover",naturalHeight:1,naturalWidth:1,src:n})})]})]})})}else $.images["474x"].length>0&&(e=$.images["474x"][0].url||"",l=(0,z.jsx)(C,{i18n:S,pinUrl:e}));return e?(0,z.jsx)(P,{appUpsellType:W,backgroundImageUrl:e,handleDismiss:B,heroImage:l,i18n:S,multipleImages:i}):(0,z.jsx)(I,{appUpsellType:W,handleDismiss:B,i18n:S,iconSize:F,upsellAppIsAndroidLiteApp:K})}if("inline"===V){let e=(0,z.jsx)(s.az,{color:"washLight",padding:1,rounding:100,children:(0,z.jsx)(s.In,{accessibilityLabel:S._('Pinterest logo', 'AppUpsellFooter.icon', 'Pinterest logo icon for app upsell footer'),color:"primary",icon:"pinterest",inline:!0,size:28})}),l=S._('It\'s better in the app', 'mweb.auth.referred_app_upsell.heading3', 'heading for referred app upsell'),i=S._('Get similar recs and more', 'mweb.auth.referred_app_upsell.description4', 'description for referred app upsell');return W.endsWith("social-referred")&&Q&&(l=(0,z.jsx)(v.UseCloseupInviteQuery,{variables:{inviteCode:Q},children:e=>(0,d.vQ)(S._('{{ invitee }} shared this idea', 'mweb.auth.referred_app_upsell.heading5', 'heading for referred app upsell that has the invitee info'),{invitee:e.v3GetInviteCodeQuery?.__typename==="InviteCodeResponse"?e.v3GetInviteCodeQuery?.data?.sender?.firstName:""})}),i=S._('Open app to discover more', 'mweb.auth.referred_app_upsell.description6', 'description for referred app upsell'),Q&&(e=(0,z.jsx)(v.UseCloseupInviteQuery,{variables:{inviteCode:Q},children:e=>(0,z.jsx)(s.az,{height:48,overflow:"hidden",rounding:600,width:48,children:e.v3GetInviteCodeQuery?.__typename==="InviteCodeResponse"&&e.v3GetInviteCodeQuery.data?.sender?.imageMediumUrl&&(0,z.jsx)(s._V,{alt:S._('App upsell profile image', 'mweb.auth.referred_app_upsell.image1', 'image for referred app upsell, using invitee profile image'),fit:"cover",naturalHeight:1,naturalWidth:1,src:e.v3GetInviteCodeQuery.data.sender.imageMediumUrl})})}))),(0,z.jsx)(w.A,{app_upsell_type:W,children:({handleOpenApp:t})=>(0,z.jsx)(s.az,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:"#F1F1F1"}},direction:"row",display:"flex",height:74,padding:4,width:"100%",zIndex:new s.rk(99999),children:(0,z.jsx)(s.Rp,{onTap:()=>{(0,x.A)(),t()},children:(0,z.jsxs)(s.so,{alignItems:"center",direction:"row",justifyContent:"start",width:"100%",children:[e,(0,z.jsxs)(s.az,{flex:"grow",marginStart:4,children:[(0,z.jsx)(s.az,{marginBottom:1,children:(0,z.jsx)(s.KJ,{children:l})}),(0,z.jsx)(s.KJ,{weight:"bold",children:i})]}),(0,z.jsx)(s.az,{"data-test-id":"referred-app-upsell-dismiss-button",children:(0,z.jsx)(s.K0,{accessibilityLabel:"cancel",icon:"close",onClick:({event:e})=>{B(),e.preventDefault(),e.stopPropagation()},size:"sm"})})]})})})})}{let e=S._('Pinterest is better in the app', 'mweb.auth.referred_app_upsell.heading3', 'heading for referred app upsell');return W.endsWith("social-referred")&&Q&&(e=(0,z.jsx)(v.UseCloseupInviteQuery,{variables:{inviteCode:Q},children:e=>(0,d.vQ)(S._('Join {{ invitee }} on Pinterest', 'mweb.auth.referred_app_upsell.heading4', 'heading for referred app upsell that has the invitee info'),{invitee:e.v3GetInviteCodeQuery?.__typename==="InviteCodeResponse"?e.v3GetInviteCodeQuery?.data?.sender?.firstName:""})})),(0,z.jsx)(r.default,{accessibilityModalLabel:S._('modal', 'mweb.auth.referred_app_upsell.modal_label', 'modal label'),closeOnOutsideClick:!1,isOpen:!0,mobileHideCloseIcon:!0,onDismiss:()=>{},type:"app_upsell_v1",zIndex:new s.rk(101),children:(0,z.jsxs)(s.az,{"data-test-id":"appUpsell-iframe",padding:2,children:[(0,z.jsx)(s.az,{display:"inlineBlock",position:"absolute",children:(0,z.jsx)(s.az,{"data-test-id":"referred-app-upsell-dismiss-button",marginStart:1,marginTop:1,children:(0,z.jsx)(s.K0,{accessibilityLabel:S._('close', 'mweb.auth.referred_app_upsell.close', 'close button'),icon:"close",onClick:B,size:"sm"})})}),(0,z.jsxs)(s.az,{marginBottom:5,marginTop:8,paddingX:2,children:[(0,z.jsx)(s.az,{display:"flex",justifyContent:"center",paddingY:3,children:(0,z.jsx)(s.In,{accessibilityLabel:S._('Logo', 'mweb.auth.referred_app_upsell.logo', 'logo icon'),color:"primary",icon:"pinterest",size:F})}),(0,z.jsx)(k,{appUpsellType:W,description:S._('Save ideas, interact with friends, and get inspired', 'mweb.auth.referred_app_upsell.description3', 'description for referred app upsell'),handleDismiss:B,heading:e,i18n:S})]})]})})}}},371343(e,l,i){i.d(l,{A:()=>n});var t=i(107639);function n(e,l){return"/"===e.pathname?"/":(0,t.iK)(e)&&l?`board/${e.pathname.substr(1)}`:e.pathname.substr(1)}},768820(e,l,i){i.d(l,{A:()=>r});var t=i(221718),n=i(360447),a=i(424120),s=i(60341);function r(){let e=(0,a.y1)();e.setItem(t.P0,Date.now()),e.getItem(t.K7)||e.setItem(t.K7,Date.now()),(0,s.V2)().setItem(n.Ae,!0)}},803361(e,l,i){i.d(l,{A:()=>n});var t=i(129625);function n(){let{logContextEvent:e}=(0,t.o)();return{trackAppUpsellDismiss:({appUpsellType:l,viewType:i,viewParameter:t,component:n,element:a})=>{e({event_type:10220,view_type:i??202,view_parameter:t,component:n,element:a,aux_data:{app_upsell_type:l}})}}}},749950(e,l,i){i.d(l,{C:()=>t});function t(e){return"IsStoryPin"===e.kind}},996366(e,l,i){i.r(l),i.d(l,{UseCloseupInviteQuery:()=>j,default:()=>z});var t,n=i(335831),a=i(657140),s=i(654798),r=i(836737),o=i(220527),d=i(108302),p=i(749950),c=i(923957),_=i(396901),u=i(410143),h=i(488265),m=i(477327),g=i(892804),f=i(135656);function w({isStoryPin:e,inviteText:l,inviterFirstName:i,isThinnerStyle:t,username:s}){(0,a.useEffect)(()=>{(0,n.A)("SocialText","/app/www/pages/duplo/SocialText.tsx")},[]);let o=(0,h.A)(),d=l.split(i);return(0,f.jsx)(r.az,{children:(0,f.jsx)(m.A,{onTouch:()=>{(0,g.GV)("mweb_social_unauth.closeup.social_text_click")},pressState:"none",children:(0,f.jsxs)(r.so,{direction:"row",gap:{row:1,column:0},children:[(0,f.jsx)(r.KJ,{inline:!0,size:"300",children:d[0]}),e?(0,f.jsx)(r.KJ,{inline:!0,size:"300",weight:"bold",children:(0,f.jsx)(r.N_,{href:"/"+s,onClick:()=>{o({action:"click",item:"invite-profiler"})},target:"blank",children:i})}):(0,f.jsx)(r.KJ,{inline:!0,size:t?"200":"300",weight:t?"normal":"bold",children:(0,f.jsx)(r.N_,{href:"/"+s,onClick:()=>{o({action:"click",item:"invite-profiler-not-story"})},target:"blank",children:i})}),(0,f.jsx)(r.KJ,{inline:!0,size:t?"200":"300",children:d[1]})]})})})}function y({inviter:e,socialContextBannerStyle:l,setShouldShowSocialUpsellBanner:i}){(0,a.useEffect)(()=>{(0,n.A)("SocialContextBanner","/app/www/pages/duplo/SocialContextBanner.tsx")},[]);let{shouldShowSignupUpsellText:t,isDismissible:s}=l,o=(0,_.A)(),{username:d}=e,p=e.imageMediumUrl,g=e.firstName,y=(0,u.A)(),x=(0,h.A)();return(0,f.jsx)(r.so,{alignItems:"center",justifyContent:s?"center":"start",children:(0,f.jsx)(r.az,{children:(0,f.jsx)(r.Rp,{fullHeight:!0,onTap:()=>{x({action:"click",item:"close-button",within:"social-banner"}),y({reason:"UPSELL_LOGIN_OR_SIGNUP",attributionLabel:"tap_desktop_unauth_social_context_banner",desktopOptions:{modalType:"signup",modalOptions:{source:"defaultSource",container:"pinWash"}}})},children:(0,f.jsxs)(r.az,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(233, 228, 255, 0.9)"}},direction:"row",display:"flex",height:44,marginBottom:6,marginStart:2*!s,marginTop:2,paddingX:s?4:2,paddingY:4,position:s?"static":"absolute",rounding:"pill",top:!0,width:s?1012:void 0,zIndex:new r.rk(1),children:[(0,f.jsx)(r.az,{marginBottom:8,marginEnd:1,marginTop:8,width:32,children:(0,f.jsx)(m.A,{onTouch:e=>{e.stopPropagation(),d&&window.open("/"+d),x({action:"click",item:"user-rep",within:"social-banner"})},pressState:"none",children:p?.includes("default")?(0,f.jsx)(r.In,{accessibilityLabel:"pinterest logo",color:"default",icon:"pinterest",size:24}):(0,f.jsx)(c.eu,{name:g,size:"fit",src:p??void 0})})}),(0,f.jsxs)(r.so,{direction:"row",flex:"grow",children:[(0,f.jsx)(w,{inviterFirstName:g,inviteText:t?(o._('{{ name }} shared this idea.', 'pin.closeup.long_banner.desktop.shareNotification', 'Long banner notifying desktop users that a sender ({{ name }}) shared a Pin to them, name: username')).replace("{{ name }}",g):(o._('{{ name }} shared this idea ', 'pin.closeup.banner.desktop.shareNotification', 'Banner notifying desktop users that a sender ({{ name }}) shared a Pin to them, name: username')).replace("{{ name }}",g),isStoryPin:!1,isThinnerStyle:t,username:d}),t&&(0,f.jsx)(r.az,{marginEnd:2,marginStart:1,children:(0,f.jsx)(r.KJ,{inline:!0,size:"200",weight:"bold",children:o._('Sign up to join them', 'pin.header.social_context_dweb', 'label')})})]}),s&&(0,f.jsx)(r.K0,{accessibilityLabel:"cancel",icon:"close",onClick:({event:e})=>{e.stopPropagation(),x({action:"dismiss",item:"close-button",within:"social-banner"}),i?.(!1)},size:"sm"})]})})})})}var x=i(673017),b=i(954225);function v({inviter:{imageMediumUrl:e,username:l,firstName:i},isStoryPin:t}){(0,a.useEffect)(()=>{(0,n.A)("SocialContextHeader","/app/www/pages/duplo/SocialContextHeader.tsx")},[]);let s=(0,_.A)(),o=()=>(0,g.GV)("mweb_social_unauth.closeup.avatar_click"),d=(0,b.A)(),p=(0,h.A)(),u=(s._('{{ name }} shared this idea', 'pin.closeup.header.shareNotification', 'header notifying users that a sender ({{ name }}) shared a Pin to them')).replace("{{ name }}",l),y="u">typeof window&&window.innerWidth<360,v=l.length>25,A=(0,f.jsx)(m.A,{pressState:"none",children:(0,f.jsxs)(r.so,{alignItems:"center",gap:4,justifyContent:"start",minHeight:80,children:[(0,f.jsx)(r.az,{marginBottom:4,marginStart:0,marginTop:4,width:48,children:(0,f.jsx)(m.A,{onTouch:o,pressState:"none",children:(0,f.jsx)(c.eu,{name:i,src:e??void 0})})}),(0,f.jsx)(r.so,{alignItems:"center",direction:"column",justifyContent:"start",children:(0,f.jsx)(r.az,{marginStart:0,children:(0,f.jsx)(w,{inviterFirstName:i,inviteText:(s._('{{ name }} shared this idea with you', 'pin.closeup.header.shareNotification', 'header notifying users that a sender ({{ name }}) shared a Pin to them, name: username')).replace("{{ name }}",i),isStoryPin:t,isThinnerStyle:!1,username:l})})})]})});return d&&t?(0,f.jsxs)(r.so,{alignItems:"center",gap:{row:2,column:0},justifyContent:"center",minHeight:v?100:80,children:[(0,f.jsx)(r.az,{marginBottom:4,marginTop:4,width:40,children:(0,f.jsx)(m.A,{onTouch:o,pressState:"none",children:(0,f.jsx)(c.eu,{name:i,size:"fit",src:e??void 0})})}),(0,f.jsx)(r.so.Item,{flex:"grow",children:(0,f.jsxs)(r.az,{alignItems:"center",direction:v?"column":"row",display:"flex",justifyContent:v?"start":"between",padding:3*!!v,children:[(0,f.jsxs)(r.so,{alignItems:"start",direction:"column",gap:{row:0,column:1},wrap:!y,children:[(0,f.jsx)(r.so,{children:(0,f.jsxs)(r.KJ,{align:v?"center":"start",children:[(0,f.jsx)(r.KJ,{inline:!0,weight:"bold",children:(0,f.jsx)(r.N_,{display:"inlineBlock",href:`/${l??""}/`,onClick:()=>{p({action:"click",item:"invite-profiler"})},target:"blank",underline:"hover",children:l})}),u.split(l)[1]]})}),!v&&(0,f.jsx)(r.KJ,{size:"100",children:s._('Open Pinterest to see more', 'unauth.mweb.shared.banner.edu', 'education for CTA to open app on shared banner')})]}),(0,f.jsx)(r.az,{alignItems:"center",display:"flex",justifyContent:"center",marginTop:3*!!v,minWidth:100*!v,children:(0,f.jsx)(x.A,{app_upsell_type:"social-context-header",componentType:14161,children:({handleOpenApp:e})=>(0,f.jsx)(r.$n,{onClick:()=>e(),size:"md",text:s._('Open app', 'unauth.mweb.shared.banner.cta', 'CTA to open app on shared banner')})})})]})})]}):A}let A=(void 0!==t||(t=i(529495)).hash&&"04834691a929e56b42c6699e90a97155"!==t.hash&&console.error("The definition of 'UnauthCloseupInviteUpsellQuery' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),t),j=({children:e,variables:l})=>e((0,s.useLazyLoadQuery)(A,l));function z({inviterFirstNameRef:e,isDesktop:l,isStoryPin:i,setShouldShowSocialUpsellBanner:t,socialContextBannerStyle:s}){(0,a.useEffect)(()=>{(0,n.A)("UnauthCloseupInviteUpsell","/app/www/closeup/duplo/unauth/UnauthCloseupInviteUpsell.tsx")},[]);let c=(0,d.d)();return c?(0,f.jsx)(o.A,{children:(0,f.jsx)(j,{variables:{inviteCode:c},children:n=>{let{firstName:a,imageMediumUrl:o,username:d}=n.v3GetInviteCodeQuery?.data?.sender??Object.freeze({});return a&&d?(e&&(e.current=a),l?(0,f.jsx)(y,{inviter:{firstName:a,imageMediumUrl:o,username:d},setShouldShowSocialUpsellBanner:t,socialContextBannerStyle:s??{isDismissible:!0,shouldShowSignupUpsellText:!0}}):(0,f.jsx)(r.az,{dangerouslySetInlineStyle:{__style:{boxShadow:"0 1px 0 0 rgba(0, 0, 0, 0.08)"}},marginEnd:-2,marginStart:-2,paddingX:2,children:(0,f.jsx)(v,{inviter:{firstName:a,imageMediumUrl:o,username:d},isStoryPin:(0,p.C)(i)})})):null}})}):null}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/52797-5126ba778dd37d66.mjs.map